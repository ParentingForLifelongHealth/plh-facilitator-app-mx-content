[{"flow_type":"template","flow_name":"data_collection","status":"released","rows":[{"name":"empty_list","value":"[]","exclude_from_translation":true},{"name":"relevant_form_type_list","value":"@calc(JSON.parse(@local.empty_list))","exclude_from_translation":true},{"type":"text","name":"debug_rel_form_types","value":"@local.relevant_form_type_list","condition":false,"exclude_from_translation":true},{"name":"debug_type","value":"@calc(typeof @local.relevant_form_type_list)","condition":false,"exclude_from_translation":true},{"type":"text","name":"show_debug_type","value":"@local.debug_type","condition":false,"exclude_from_translation":true},{"type":"begin_items","name":"find_relevant_forms","value":"@data.report","exclude_from_translation":true},{"type":"text","name":"text","value":"@item.tag_list","condition":false,"exclude_from_translation":true},{"name":"is_relevant_form","value":"@calc(@item.tag_list.includes(@fields.current_package))","condition":"@global.has_multiple_content_packages","exclude_from_translation":true},{"name":"is_relevant_form","value":true,"condition":"!@global.has_multiple_content_packages"},{"name":"push","value":"@calc(@local.relevant_form_type_list.push(@item.type)) ","condition":"@local.is_relevant_form","exclude_from_translation":true},{"type":"end_items","exclude_from_translation":true},{"name":"virtual","value":"virtual","exclude_from_translation":true},{"name":"has_virtual","value":"@calc(@local.relevant_form_type_list.includes(@local.virtual)) ","exclude_from_translation":true},{"type":"text","name":"debug_has_virtual","value":"@local.has_virtual","condition":false,"exclude_from_translation":true},{"name":"in_person","value":"in_person","exclude_from_translation":true},{"name":"has_in_person","value":"@calc(@local.relevant_form_type_list.includes(@local.in_person)) ","exclude_from_translation":true},{"type":"text","name":"debug_has_in_person","value":"@local.has_in_person","condition":false,"exclude_from_translation":true},{"name":"external","value":"external","exclude_from_translation":true},{"name":"has_external","value":"@calc(@local.relevant_form_type_list.includes(@local.external)) ","exclude_from_translation":true},{"type":"text","name":"debug_has_external","value":"@local.has_external","condition":false,"exclude_from_translation":true},{"type":"update_action_list","name":"custom_actions_1","action_list":"nav_resume | emit: force_reload","exclude_from_translation":true},{"type":"begin_template","name":"section_header","value":"section_header","exclude_from_translation":true},{"name":"section_id","value":"data_collection","exclude_from_translation":true},{"name":"section_data","value":"app_section","exclude_from_translation":true},{"type":"end_template"},{"type":"text","name":"question_text","value":"What type of session are you submitting a report for?"},{"type":"begin_display_group","name":"dg_type"},{"type":"button","name":"button_in_person","value":"In-Person","action_list":"click | pop_up: in_person_unreported","parameter_list":"style: card","condition":"@local.has_in_person","style_list":"flex: 1"},{"type":"button","name":"button_virtual","value":"@global.virtual_session_platform","action_list":"click | pop_up: virtual_unreported","parameter_list":"style: card","condition":"@local.has_virtual","style_list":"flex: 1","exclude_from_translation":true},{"type":"end_display_group"},{"type":"button","name":"button_external","value":"Reflection for Coaching","action_list":"click | pop_up: external_form","parameter_list":"style: card","condition":"@local.has_external"},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"name":"previous_report_id_array","value":"@calc(Object.keys(@local.attendance_data_json))","exclude_from_translation":true},{"name":"previous_reports_exist","value":"@calc(@local.previous_report_id_array.length != 0)","exclude_from_translation":true},{"type":"begin_display_group","name":"dg_previous","parameter_list":"style: column","condition":"@local.previous_reports_exist"},{"type":"text","name":"text_previous","value":"Previous reports","parameter_list":"style: emphasised"},{"type":"begin_items","value":"@local.attendance_data_json","exclude_from_translation":true},{"type":"begin_template","name":"existing_report","value":"existing_report","exclude_from_translation":true},{"name":"report_id","value":"@item.report_id","exclude_from_translation":true},{"type":"end_template"},{"type":"end_items"},{"type":"end_display_group"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"existing_report","status":"released","rows":[{"name":"report_id","value":"onboarding","exclude_from_translation":true},{"name":"report_concat","value":"report.@local.report_id","exclude_from_translation":true},{"name":"report_data","value":"@data.@local.report_concat","exclude_from_translation":true},{"name":"report_name","value":"@local.report_data.name","exclude_from_translation":true},{"name":"report_type","value":"@local.report_data.type","exclude_from_translation":true},{"name":"form","value":"_form","exclude_from_translation":true},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"type":"begin_display_group"},{"type":"text","name":"text","value":"@local.report_name","style_list":"flex: 1","exclude_from_translation":true},{"type":"round_button","name":"button_edit","action_list":"click | go_to: @local.report_type@local.form;\nclick | set_field: current_report_id: @local.report_id; ","parameter_list":"icon_src: pencil; style: navigation","exclude_from_translation":true},{"type":"round_button","name":"button_delete","action_list":"click | pop_up: delete_report;\nclick | set_field: current_report_id: @local.report_id; ","parameter_list":"icon_src: trash; style: navigation","exclude_from_translation":true,"comments":"Using a go_to action here rather than pop_up as a work-around until the feature pop-up closes when emitting (un)completed is implemented"},{"type":"end_display_group"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"delete_report","status":"released","rows":[{"name":"report_id","value":"@fields.current_report_id","exclude_from_translation":true},{"name":"report_concat","value":"report.@local.report_id","exclude_from_translation":true},{"name":"report_data","value":"@data.@local.report_concat","exclude_from_translation":true},{"name":"report_name","value":"@local.report_data.name","exclude_from_translation":true},{"name":"report_type","value":"@local.report_data.type","exclude_from_translation":true},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"type":"title","name":"title","value":"Delete report"},{"type":"text","name":"text_warning","value":"Are you sure you want to delete the **@local.report_name** report? This cannot be undone."},{"name":"show_buttons","value":true,"exclude_from_translation":true},{"name":"delete_this_report","value":"@calc(delete @local.attendance_data_json[@local.report_id])","exclude_from_translation":true},{"name":"attendance_data_string","value":"@calc(JSON.stringify(@local.attendance_data_json))","exclude_from_translation":true},{"type":"begin_display_group"},{"type":"button","name":"button_no","value":"No","action_list":"click | emit: uncompleted","parameter_list":"style: card","style_list":"flex:1"},{"type":"button","name":"button_delete","value":"Yes","action_list":"click | set_field: attendance_data: @local.attendance_data_string; \nclick | emit: completed","parameter_list":"style: card","style_list":"flex:1"},{"type":"end_display_group"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"in_person_unreported","status":"released","rows":[{"type":"title","name":"title","value":"In-Person"},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"name":"previous_report_id_array","value":"@calc(Object.keys(@local.attendance_data_json))","exclude_from_translation":true},{"name":"at_least_one_unreported","value":false,"exclude_from_translation":true},{"type":"begin_items","value":"@data.report","exclude_from_translation":true},{"name":"already_reported","value":"@calc(@local.previous_report_id_array.includes(@item.id))","exclude_from_translation":true},{"name":"is_relevant_form","value":"@calc(@item.tag_list.includes(@fields.current_package))","condition":"@global.has_multiple_content_packages"},{"name":"is_relevant_form","value":true,"condition":"!@global.has_multiple_content_packages"},{"name":"at_least_one_unreported","value":true,"condition":"!@local.already_reported & @item.type == \"in_person\" & @local.is_relevant_form"},{"type":"end_items"},{"type":"end_items"},{"type":"text","name":"question_text","value":"Which session are you reporting on? ","condition":"@local.at_least_one_unreported"},{"type":"begin_items","value":"@data.report","exclude_from_translation":true},{"name":"already_reported","value":"@calc(@local.previous_report_id_array.includes(@item.id))","exclude_from_translation":true},{"name":"is_relevant_form","value":"@calc(@item.tag_list.includes(@fields.current_package))","condition":"@global.has_multiple_content_packages"},{"name":"is_relevant_form","value":true,"condition":"!@global.has_multiple_content_packages"},{"type":"button","name":"button_@item.id","value":"@item.name","action_list":"click | set_field: current_report_id: @item.id;\nclick | emit: completed;\nclick | go_to: in_person_form: dismiss_pop_up: true;","parameter_list":"style: card","condition":"!@local.already_reported & @item.type == \"in_person\" & @local.is_relevant_form","exclude_from_translation":true},{"type":"end_items"},{"type":"text","name":"text_none","value":"You have reported on all in-person sessions already.","condition":"!@local.at_least_one_unreported"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"virtual_unreported","status":"released","rows":[{"type":"title","name":"title","value":"@global.virtual_session_platform","exclude_from_translation":true},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"name":"previous_report_id_array","value":"@calc(Object.keys(@local.attendance_data_json))","exclude_from_translation":true},{"name":"at_least_one_unreported","value":false,"exclude_from_translation":true},{"type":"begin_items","value":"@data.report","exclude_from_translation":true},{"name":"already_reported","value":"@calc(@local.previous_report_id_array.includes(@item.id))","exclude_from_translation":true},{"name":"is_relevant_form","value":"@calc(@item.tag_list.includes(@fields.current_package))","condition":"@global.has_multiple_content_packages"},{"name":"is_relevant_form","value":true,"condition":"!@global.has_multiple_content_packages"},{"name":"at_least_one_unreported","value":true,"condition":"!@local.already_reported & @item.type == \"virtual\" & @local.is_relevant_form"},{"type":"end_items"},{"type":"text","name":"question_text","value":"Which session are you reporting on? ","condition":"@local.at_least_one_unreported"},{"type":"begin_items","value":"@data.report","exclude_from_translation":true},{"name":"already_reported","value":"@calc(@local.previous_report_id_array.includes(@item.id))","exclude_from_translation":true},{"name":"is_relevant_form","value":"@calc(@item.tag_list.includes(@fields.current_package))","condition":"@global.has_multiple_content_packages"},{"name":"is_relevant_form","value":true,"condition":"!@global.has_multiple_content_packages"},{"type":"button","name":"button_@item.id","value":"@item.name","action_list":"click | set_field: current_report_id: @item.id;\nclick | emit: completed;\nclick | go_to: virtual_form: dismiss_pop_up: true;","parameter_list":"style: card","condition":"!@local.already_reported & @item.type == \"virtual\" & @local.is_relevant_form","exclude_from_translation":true},{"type":"end_items"},{"type":"text","name":"text_none","value":"You have reported on all @global.virtual_session_platform sessions already.","condition":"!@local.at_least_one_unreported"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"external_form","status":"released","rows":[{"type":"title","name":"title","value":"Reflection for Coaching"},{"type":"text","name":"question_text","value":"Which session are you reporting on? "},{"type":"begin_items","value":"@data.report","exclude_from_translation":true},{"name":"is_relevant_form","value":"@calc(@item.tag_list.includes(@fields.current_package))","condition":"@global.has_multiple_content_packages"},{"name":"is_relevant_form","value":true,"condition":"!@global.has_multiple_content_packages"},{"type":"button","name":"button_@item.id","value":"@item.name","action_list":"click | go_to_url: @item.external_url","parameter_list":"style: card","condition":"@item.type == \"external\" & @local.is_relevant_form","exclude_from_translation":true},{"type":"end_items"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"in_person_form","status":"released","rows":[{"name":"report_id","value":"@fields.current_report_id","exclude_from_translation":true},{"name":"report_concat","value":"report.@local.report_id","exclude_from_translation":true},{"name":"report_data","value":"@data.@local.report_concat","exclude_from_translation":true},{"name":"report_name","value":"@local.report_data.name","exclude_from_translation":true},{"name":"report_type_name","value":"In-Person"},{"type":"title","name":"title","value":"@local.report_name (@local.report_type_name)","exclude_from_translation":true},{"name":"now","value":"@calc(timestamp())","exclude_from_translation":true},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"name":"previous_report_id_array","value":"@calc(Object.keys(@local.attendance_data_json))","exclude_from_translation":true},{"name":"new_report","value":"@calc(!(@local.previous_report_id_array.includes(@local.report_id)))","exclude_from_translation":true,"comments":"Boolean - is this a new report?"},{"name":"add_new_report","value":"@calc(@local.attendance_data_json[@local.report_id] = {})","condition":"@local.new_report","exclude_from_translation":true,"comments":"If this is a new parent report:\nAdd an entry to the json for this report and..."},{"name":"set_new_report_id","value":"@calc(@local.attendance_data_json[@local.report_id].report_id = @local.report_id)","condition":"@local.new_report","exclude_from_translation":true,"comments":"... set their report id and"},{"name":"set_new_parent_group_no","value":"@calc(@local.attendance_data_json[@local.report_id].parent_group_no = @fields.current_parent_group_no)","condition":"@local.new_report","exclude_from_translation":true,"comments":"... set their parent group number"},{"name":"create_present","value":"@calc(@local.attendance_data_json[@local.report_id].present = [])","condition":"@local.new_report","exclude_from_translation":true,"comments":"... add attendance entry"},{"name":"create_edited","value":"@calc(@local.attendance_data_json[@local.report_id].edited = [])","condition":"@local.new_report","exclude_from_translation":true,"comments":"... add timestamps entry"},{"name":"edited_set","value":"@calc(new Set(@local.attendance_data_json[@local.report_id].edited))","exclude_from_translation":true},{"name":"add_now","value":"@calc(@local.edited_set.add(@local.now))","exclude_from_translation":true},{"name":"edited_array","value":"@calc(Array.from(@local.edited_set))","exclude_from_translation":true},{"name":"update_edited","value":"@calc(@local.attendance_data_json[@local.report_id].edited = @local.edited_array)","exclude_from_translation":true},{"name":"placeholder","value":"minutes"},{"type":"text","name":"question_prep_time","value":"How many minutes did it take you to prepare for the session?","parameter_list":"style: emphasised"},{"type":"text_box","name":"text_box_prep_time","value":"@local.attendance_data_json[@local.report_id].prep_time","parameter_list":"number_input: true; \nplaceholder: @local.placeholder; \nmax_length: 3","exclude_from_translation":true},{"name":"set_prep_time","value":"@calc(@local.attendance_data_json[@local.report_id].prep_time = @local.text_box_prep_time)","exclude_from_translation":true},{"type":"text","name":"question_travel_time","value":"How many minutes did it take you to travel to the location where the session was delivered?","parameter_list":"style: emphasised"},{"type":"text_box","name":"text_box_travel_time","value":"@local.attendance_data_json[@local.report_id].travel_time","parameter_list":"number_input: true; \nplaceholder: @local.placeholder; \nmax_length: 3","exclude_from_translation":true},{"name":"set_travel_time","value":"@calc(@local.attendance_data_json[@local.report_id].travel_time = @local.text_box_travel_time)","exclude_from_translation":true},{"type":"text","name":"question_session_time","value":"How many minutes did it take you to deliver the session?","parameter_list":"style: emphasised"},{"type":"text_box","name":"text_box_session_time","value":"@local.attendance_data_json[@local.report_id].session_time","parameter_list":"number_input: true; \nplaceholder: @local.placeholder; \nmax_length: 3","exclude_from_translation":true},{"name":"set_session_time","value":"@calc(@local.attendance_data_json[@local.report_id].session_time = @local.text_box_session_time)","exclude_from_translation":true},{"type":"text","name":"question_participants","value":"Which of the parents in your group attended your in-person session?","parameter_list":"style: emphasised"},{"name":"parent","value":"Parent"},{"name":"parent_data_json","value":"@calc(JSON.parse(@fields.parent_data))","exclude_from_translation":true},{"name":"present_parent_set","value":"@calc(new Set(@local.attendance_data_json[@local.report_id].present))","exclude_from_translation":true},{"type":"begin_items","value":"@local.parent_data_json","exclude_from_translation":true},{"type":"begin_display_group","name":"dg_parent_@item.parent_no","exclude_from_translation":true},{"name":"parent_no","value":"@item.parent_no","exclude_from_translation":true},{"name":"parent_id","value":"parent_@local.parent_no","exclude_from_translation":true},{"name":"toggle_initial_state","value":"@calc(@local.present_parent_set.has(@local.parent_id))","exclude_from_translation":true},{"type":"toggle_bar","name":"parent_@item.parent_no","value":"@local.toggle_initial_state","exclude_from_translation":true},{"name":"parent_first_name","value":"@local.parent_data_json[@local.parent_id].first_name","exclude_from_translation":true},{"name":"parent_last_name","value":"@local.parent_data_json[@local.parent_id].last_name","exclude_from_translation":true},{"name":"parent_name","value":"@calc((@local.parent_first_name || @local.parent_last_name) ? `${@local.parent_first_name || ''} ${@local.parent_last_name || ''}`.trim() : `${@local.parent} ${@local.parent_no}`)","exclude_from_translation":true,"comments":"Javascript syntax reference"},{"type":"text","name":"text_name_@item.parent_no","value":"@local.parent_name","exclude_from_translation":true,"style_list":"flex: 1"},{"name":"add_parent_@item.parent_no","value":"@calc(@local.present_parent_set.add(@local.parent_id))","condition":"@local.@local.parent_id","exclude_from_translation":true},{"name":"delete_parent_@item.parent_no","value":"@calc(@local.present_parent_set.delete(@local.parent_id))","condition":"!(@local.@local.parent_id)","exclude_from_translation":true},{"type":"end_display_group"},{"type":"end_items"},{"name":"present_parent_array","value":"@calc(Array.from(@local.present_parent_set))","exclude_from_translation":true},{"name":"update_present_parents","value":"@calc(@local.attendance_data_json[@local.report_id].present = @local.present_parent_array)","exclude_from_translation":true},{"type":"text","name":"text_instruction","value":"Please check all the activities you completed during this session:","parameter_list":"style: emphasised"},{"name":"report_extra","value":"report_@local.report_id","exclude_from_translation":true},{"type":"begin_items","value":"@data.@local.report_extra","exclude_from_translation":true},{"name":"question_id","value":"@item.id","exclude_from_translation":true},{"name":"question_type","value":"@item.type","exclude_from_translation":true},{"name":"question_text","value":"@item.text","exclude_from_translation":true},{"type":"text","name":"title","value":"@local.question_text","parameter_list":"style: contextual","condition":"@local.question_type == \"title\"","exclude_from_translation":true},{"type":"begin_display_group","name":"dg_toggle_bar","condition":"@local.question_type != \"title\"","exclude_from_translation":true},{"type":"toggle_bar","name":"toggle_@item.id","value":"@local.attendance_data_json[@local.report_id][@item.id]","exclude_from_translation":true},{"name":"condition_string","value":"toggle_@item.id"},{"name":"set_reply","value":"@calc(@local.attendance_data_json[@local.report_id][@local.question_id] = new Boolean(true))","condition":"@local.@local.condition_string","exclude_from_translation":true},{"name":"set_reply","value":"@calc(@local.attendance_data_json[@local.report_id][@local.question_id] = new Boolean(false))","condition":"!(@local.@local.condition_string)","exclude_from_translation":true},{"type":"text","name":"text","value":"@local.question_text","condition":"@local.question_type == \"toggle\"","exclude_from_translation":true,"style_list":"flex: 1"},{"type":"end_display_group"},{"type":"end_items"},{"name":"attendance_data_string","value":"@calc(JSON.stringify(@local.attendance_data_json))","exclude_from_translation":true},{"type":"begin_template","name":"nav_buttons","value":"nav_buttons","action_list":"completed | set_field: attendance_data: @local.attendance_data_string; \ncompleted | emit: completed; \ncompleted | emit: server_sync"},{"type":"end_template"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"toggle_bar_question","status":"draft","rows":[{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"name":"report_id","value":"onboarding","exclude_from_translation":true},{"name":"report_data","value":"report_@local.report_id","exclude_from_translation":true},{"type":"begin_items","value":"@data.@local.report_data","exclude_from_translation":true},{"name":"question_id","value":"@item.id","exclude_from_translation":true},{"name":"question_type","value":"@item.type","exclude_from_translation":true},{"name":"question_text","value":"@item.text","exclude_from_translation":true},{"type":"text","name":"title","value":"@local.question_text","condition":"@local.question_type == \"title\"","exclude_from_translation":true},{"type":"begin_display_group","name":"dg_toggle_bar","condition":"@local.question_type != \"title\"","exclude_from_translation":true},{"type":"toggle_bar","name":"toggle_@item.id","value":"@local.attendance_data_json[@local.report_id][@item.id]","exclude_from_translation":true},{"name":"condition_string","value":"toggle_@item.id"},{"name":"set_reply","value":"@calc(@local.attendance_data_json[@local.report_id][@local.question_id] = new Boolean(true))","condition":"@local.@local.condition_string","exclude_from_translation":true},{"name":"set_reply","value":"@calc(@local.attendance_data_json[@local.report_id][@local.question_id] = new Boolean(false))","condition":"!(@local.@local.condition_string)","exclude_from_translation":true},{"type":"text","name":"text","value":"@local.question_text","condition":"@local.question_type == \"toggle\"","exclude_from_translation":true,"style_list":"flex: 1"},{"type":"text","name":"text","value":"@local.question_text","parameter_list":"style: contextual","condition":"@local.question_type == \"sub_toggle\"","exclude_from_translation":true,"style_list":"flex: 1"},{"type":"end_display_group"},{"type":"end_items"},{"name":"attendance_data_string","value":"@calc(JSON.stringify(@local.attendance_data_json))"},{"type":"begin_template","name":"nav_buttons","value":"nav_buttons","action_list":"completed | set_field: attendance_data: @local.attendance_data_string; \ncompleted | emit: completed; \ncompleted | emit: server_sync"},{"type":"end_template"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"virtual_form","status":"released","rows":[{"name":"report_id","value":"@fields.current_report_id","exclude_from_translation":true},{"name":"report_concat","value":"report.@local.report_id","exclude_from_translation":true},{"name":"report_data","value":"@data.@local.report_concat","exclude_from_translation":true},{"name":"report_name","value":"@local.report_data.name","exclude_from_translation":true},{"name":"report_type_name","value":"@global.share_medium","exclude_from_translation":true},{"type":"title","name":"title","value":"@local.report_name (@local.report_type_name)","exclude_from_translation":true},{"name":"now","value":"@calc(timestamp())","exclude_from_translation":true},{"name":"attendance_data_json","value":"@calc(JSON.parse(@fields.attendance_data))","exclude_from_translation":true},{"name":"previous_report_id_array","value":"@calc(Object.keys(@local.attendance_data_json))","exclude_from_translation":true},{"name":"new_report","value":"@calc(!(@local.previous_report_id_array.includes(@local.report_id)))","exclude_from_translation":true,"comments":"Boolean - is this a new report?"},{"name":"add_new_report","value":"@calc(@local.attendance_data_json[@local.report_id] = {})","condition":"@local.new_report","exclude_from_translation":true,"comments":"If this is a new parent report:\nAdd an entry to the json for this report and..."},{"name":"set_new_report_id","value":"@calc(@local.attendance_data_json[@local.report_id].report_id = @local.report_id)","condition":"@local.new_report","exclude_from_translation":true,"comments":"... set their report id and"},{"name":"set_new_parent_group_no","value":"@calc(@local.attendance_data_json[@local.report_id].parent_group_no = @fields.current_parent_group_no)","condition":"@local.new_report","exclude_from_translation":true,"comments":"... set their parent group number"},{"name":"create_present","value":"@calc(@local.attendance_data_json[@local.report_id].present = [])","condition":"@local.new_report","exclude_from_translation":true,"comments":"... add attendance entry"},{"name":"create_edited","value":"@calc(@local.attendance_data_json[@local.report_id].edited = [])","condition":"@local.new_report","exclude_from_translation":true,"comments":"... add timestamps entry"},{"name":"edited_set","value":"@calc(new Set(@local.attendance_data_json[@local.report_id].edited))","exclude_from_translation":true},{"name":"add_now","value":"@calc(@local.edited_set.add(@local.now))","exclude_from_translation":true},{"name":"edited_array","value":"@calc(Array.from(@local.edited_set))","exclude_from_translation":true},{"name":"update_edited","value":"@calc(@local.attendance_data_json[@local.report_id].edited = @local.edited_array)","exclude_from_translation":true},{"name":"placeholder","value":"minutes"},{"type":"text","name":"question_session_time","value":"How many minutes did you spend facilitating your parent @global.share_medium group over the last week?","parameter_list":"style: emphasised"},{"type":"text_box","name":"text_box_session_time","value":"@local.attendance_data_json[@local.report_id].session_time","parameter_list":"number_input: true; \nplaceholder: @local.placeholder; \nmax_length: 3","exclude_from_translation":true},{"name":"set_session_time","value":"@calc(@local.attendance_data_json[@local.report_id].session_time = @local.text_box_session_time)","exclude_from_translation":true},{"type":"text","name":"question_participants","value":"**Which of the parents in your group participated?**\n*Participation is defined as any parent who posts a comment, question, reply or reaction (such as a thumbs up) within the chat since you shared the first message from the weekly discussion.*"},{"name":"parent","value":"Parent"},{"name":"parent_data_json","value":"@calc(JSON.parse(@fields.parent_data))"},{"name":"present_parent_set","value":"@calc(new Set(@local.attendance_data_json[@local.report_id].present))"},{"type":"begin_items","value":"@local.parent_data_json","exclude_from_translation":true},{"type":"begin_display_group","name":"dg_parents","exclude_from_translation":true},{"name":"parent_no","value":"@item.parent_no","exclude_from_translation":true},{"name":"parent_id","value":"parent_@local.parent_no","exclude_from_translation":true},{"name":"toggle_initial_state","value":"@calc(@local.present_parent_set.has(@local.parent_id))","exclude_from_translation":true},{"type":"toggle_bar","name":"parent_@item.parent_no","value":"@local.toggle_initial_state","exclude_from_translation":true},{"name":"parent_first_name","value":"@local.parent_data_json[@local.parent_id].first_name","exclude_from_translation":true},{"name":"parent_last_name","value":"@local.parent_data_json[@local.parent_id].last_name","exclude_from_translation":true},{"name":"parent_name","value":"@calc((@local.parent_first_name || @local.parent_last_name) ? `${@local.parent_first_name || ''} ${@local.parent_last_name || ''}`.trim() : `${@local.parent} ${@local.parent_no}`)","exclude_from_translation":true,"comments":"Javascript syntax reference"},{"type":"text","name":"text_name_@item.parent_no","value":"@local.parent_name","exclude_from_translation":true,"style_list":"flex: 1"},{"name":"add_parent_@item.parent_no","value":"@calc(@local.present_parent_set.add(@local.parent_id))","condition":"@local.@local.parent_id","exclude_from_translation":true},{"name":"delete_parent_@item.parent_no","value":"@calc(@local.present_parent_set.delete(@local.parent_id))","condition":"!(@local.@local.parent_id)","exclude_from_translation":true},{"type":"end_display_group"},{"type":"end_items"},{"name":"present_parent_array","value":"@calc(Array.from(@local.present_parent_set))","exclude_from_translation":true},{"name":"update_present_parents","value":"@calc(@local.attendance_data_json[@local.report_id].present = @local.present_parent_array)","exclude_from_translation":true},{"type":"text","name":"question_sent_messages","value":"I was able to send...","parameter_list":"style: emphasised"},{"name":"all","value":"All of the messages"},{"name":"some","value":"Some of the messages"},{"name":"none","value":"None of the messages"},{"name":"answer_list","value":"name: all | text: @local.all; name: some | text: @local.some; name: none | text: @local.none"},{"type":"radio_button_grid","name":"radio_button_grid_sent_messages","value":"@local.attendance_data_json[@local.report_id].sent_messages","parameter_list":"item_width: 100%; answer_list: @local.answer_list"},{"name":"set_messages","value":"@calc(@local.attendance_data_json[@local.report_id].sent_messages = @local.radio_button_grid_sent_messages)","exclude_from_translation":true},{"name":"attendance_data_string","value":"@calc(JSON.stringify(@local.attendance_data_json))","exclude_from_translation":true},{"type":"begin_template","name":"nav_buttons","value":"nav_buttons","action_list":"completed | set_field: attendance_data: @local.attendance_data_string; \ncompleted | emit: completed; \ncompleted | emit: server_sync"},{"type":"end_template"}],"_xlsxPath":"templates/data_collection.xlsx"},{"flow_type":"template","flow_name":"odk_form","status":"released","rows":[{"type":"title","name":"title","value":"Sample ODK form"},{"name":"form_asset_input","value":"odk_forms/eplh_pilot_facilitator_weekly_survey_combined.json"},{"type":"odk_form","name":"form_1","action_list":"changed | set_field: sample_odk_output: @local.form_1","parameter_list":"form_asset: @local.form_asset_input;"}],"_xlsxPath":"templates/data_collection.xlsx"}]
